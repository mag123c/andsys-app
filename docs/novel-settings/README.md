# 소설 설정 관리 (Novel Settings)

소설 작성에 필요한 설정 관리 기능 기획 문서.

## 기획 개요

### 목표

```
"소설을 쓰면서 설정을 바로 참조하고, 일관성 있는 스토리를 만들 수 있도록"
```

1. **등장인물 관리**: 캐릭터 정보, 이미지, 관계 설정
2. **시놉시스 관리**: 전체 줄거리, 에디터 기반 편집
3. **관계도 시각화**: 캐릭터 간 관계를 그래프로 표현
4. **워크스페이스**: 글 작성 중 설정 참조 (우측 사이드바)
5. **버전 히스토리**: 변경 이력 추적 (git diff 스타일)

### 벤치마킹

[뮤블(Muvel)](https://muvel.app/)의 워크스페이스 시스템 참고:

| 뮤블 기능 | Andsys 적용 |
|----------|-------------|
| 워크스페이스 (창 분할) | 우측 사이드바로 설정 참조 |
| 위키 에디터 | 시놉시스/등장인물 관리 |
| 다이나믹 링크 | 에디터에서 설정 즉시 확인 |

---

## 핵심 기능

### 1. 등장인물 (Characters)

| 항목 | 설명 |
|------|------|
| **기본 정보** | 이름, 별명, 나이, 성별, 종족 |
| **외형** | 키, 몸무게, 프로필 이미지 |
| **성격** | MBTI, 성격 설명 |
| **배경** | 학력, 직업, 소속 |
| **관계** | 다른 캐릭터와의 관계 설정 |
| **커스텀 필드** | 사용자 정의 key-value |

### 2. 시놉시스 (Synopsis)

| 항목 | 설명 |
|------|------|
| **에디터** | Tiptap 기반 (기존 에디터 재활용) |
| **버전 관리** | 변경 시 diff 저장 |
| **히스토리** | 이전 버전 조회/복원 |

### 3. 관계도 (Relationships)

| 항목 | 설명 |
|------|------|
| **리스트 뷰** | 캐릭터별 관계 목록 (Phase 1) |
| **그래프 뷰** | 노드 기반 시각화 (Phase 2) |
| **관계 타입** | 가족, 친구, 연인, 적대 등 |

### 4. 표지 이미지 (Cover Image)

| 항목 | 설명 |
|------|------|
| **크기** | 100 x 150px 고정 |
| **저장** | Supabase Storage (추상화) |
| **오프라인** | IndexedDB (Base64) |
| **디폴트** | 밝은 회색 배경 + 앱 로고 |

### 5. 워크스페이스 UI

```
┌────────────────────────────────────────────────────────────┐
│ [≡]  소설제목                              [유저 정보]     │
├──────────┬─────────────────────────────────┬──────────────┤
│ 좌측     │                                 │ 우측         │
│ 사이드바 │       메인 에디터               │ 사이드바     │
│          │                                 │              │
│ 📖 챕터  │                                 │ 🔍 설정 참조 │
│ 📝 시놉  │                                 │  - 등장인물  │
│ 👤 인물  │                                 │  - 시놉시스  │
│          │                                 │  - 관계도    │
│ [접기 ◀] │                                 │ [▶ 접기]     │
└──────────┴─────────────────────────────────┴──────────────┘
```

---

## 문서 구조

| 문서 | 내용 |
|------|------|
| [CHARACTERS.md](./CHARACTERS.md) | 등장인물 스키마, UI, 구현 상세 |
| [SYNOPSIS.md](./SYNOPSIS.md) | 시놉시스 에디터, 버전 관리 |
| [RELATIONSHIPS.md](./RELATIONSHIPS.md) | 관계 설정, 관계도 UI |
| [COVER-IMAGE.md](./COVER-IMAGE.md) | 표지 이미지 업로드, 저장 전략 |
| [WORKSPACE.md](./WORKSPACE.md) | 워크스페이스 레이아웃, 사이드바 |
| [HISTORY.md](./HISTORY.md) | 버전 히스토리, diff 저장 |
| [TASK.md](./TASK.md) | 작업 체크리스트, 우선순위 |

---

## 개발 단계

| Phase | 범위 | 복잡도 |
|-------|------|--------|
| **1** | 소설 상세 레이아웃 변경 (좌측 사이드바 + 접기/펴기) | ⭐⭐ |
| **2** | 시놉시스 (Tiptap 에디터 재활용) | ⭐⭐ |
| **3** | 등장인물 CRUD (기본 필드 + 이미지) | ⭐⭐⭐ |
| **4** | 관계 설정 (리스트 형태) | ⭐⭐ |
| **5** | 표지 이미지 | ⭐⭐ |
| **6** | 우측 사이드바 (설정 참조) | ⭐⭐⭐ |
| **7** | 히스토리 (diff) | ⭐⭐⭐⭐ |
| **8** | 관계도 UI (노드 그래프) | ⭐⭐⭐⭐⭐ |

---

## 핵심 원칙

1. **점진적 도입**: Phase 1부터 순차적 구현
2. **기존 패턴 재활용**: Tiptap 에디터, Repository 패턴
3. **추상화**: 저장소 변경 용이하게 설계
4. **오프라인 우선**: 로컬 저장 후 동기화
5. **태블릿/노트북 우선**: 모바일은 추후 고려
